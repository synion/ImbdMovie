<p id="notice"><%= notice %></p>

<%= search_form_for @q do |f| %>
  <%= f.label :title_or_description_cont %>
  <%= f.search_field :title_or_description_cont %>
 <% end %>

<h1>Movies</h1>

<table class="">
  <thead>
    <tr>
      <th>Title</th>
      <th>Genre</th>
      <th>User</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @movies.each do |movie| %>
      <tr>
        <td><%= movie.title %></td>
        <td><% movie.genres.each do |genre| %>
            <%= link_to "#{genre.title.capitalize}", movies_path(q: {genres_title_cont_any: genre.title}) %>
            <% end %></td>
        <td><%= link_to "#{movie.user}", movies_path(q: {user_name_cont_any: movie.user.name}) %></td>
        <td><%= link_to 'Show', movie %></td>
        <td><%= link_to 'Edit', edit_movie_path(movie) %></td>
        <td><%= link_to 'Destroy', movie, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<%= link_to 'Reset', movies_path %>
<%= link_to 'New Movie', new_movie_path %>
